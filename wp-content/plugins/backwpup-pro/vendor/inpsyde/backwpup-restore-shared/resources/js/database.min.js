window.BWU=window.BWU||{},window.BWU.Restore=window.BWU.Restore||{},window.BWU.Restore.Factory=window.BWU.Restore.Factory||{},function(s,o,c){"use strict";var i={onTestSuccess:function(n,t,e){return s.Functions.printMessageSuccess(e.responseJSON.data.message,c("#restore_step")),o.isUndefined(e.responseJSON.data.charset)||!1!==e.responseJSON.data.charset||c("#db-charset-field").removeClass("hidden").animate({opacity:1},200,"linear"),this},onConnectionFail:function(n){return s.Functions.printMessageError(n.responseJSON.data.message,c("#restore_step")),this},connect:function(s,i){return c.ajax({type:"POST",url:this.url,cache:!1,dataType:"json",data:{controller:"job",action:"db_test",db_settings:this.settings,backwpup_action_nonce:this.nonce}}).done(function(n,t,e){!0===n.success&&o.isFunction(i)&&i(n,t,e),o.isFunction(s)&&s(n,t,e)}).fail(this.onConnectionFail),this},testConnection:function(){return this.connect(this.onTestSuccess),this},saveConnectionSettings:function(n){return this.connect(null,n),this},init:function(){return this},construct:function(n,t,e){return o.bindAll(this,"onTestSuccess","onConnectionFail","connect","testConnection","saveConnectionSettings","init"),this.url=n,this.nonce=t,this.settings=e,this}};s.Restore.FactoryDatabase=function(n,t,e){return Object.create(i).construct(n,t,e)}}(window.BWU,window._,window.jQuery);